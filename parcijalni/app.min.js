const searchForm=document.querySelector("#search-form"),searchFormInput=document.querySelector("#search-form-input"),searchButtonElement=document.querySelector("#search-form-button"),songList=document.querySelector("#song-list"),errorMessage=document.querySelector("#error-message"),loadingElement=document.querySelector("#loading");function showLoading(e){loadingElement.innerText=e}function showError(e){errorMessage.innerHTML=e}function listSongs(e){if(songList.innerHTML="",null==e)return;let t=document.createElement("table");t.classList.add("songListTable");for(let n=0;n<e.resultCount;n++){const r=e.results[n].artworkUrl30,o=e.results[n].artistName,s=e.results[n].trackName;let l=document.createElement("tr"),a=document.createElement("th");a.innerHTML=`<img src=${r}>`;let c=document.createElement("th");c.innerText=o;let i=document.createElement("th");i.innerText=s,l.appendChild(a),l.appendChild(c),l.appendChild(i),t.appendChild(l)}songList.appendChild(t)}searchForm.addEventListener("submit",function(e){e.preventDefault();const t=(searchFormInput.value||"").trim().toLocaleLowerCase();""!==t?(fetch(`https://itunes.apple.com/search?term=${t}&entity=song`).then(e=>{if(console.log(e),e.ok)return e.json();throw new Error("Something went wrong :(")}).then(e=>{showLoading(""),showError(""),listSongs(e)}).catch(e=>{showLoading(""),listSongs(null),showError(e.message)}),showLoading("PATIENCE! I'm loading.")):window.alert("Nothing to search :(")});